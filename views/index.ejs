<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Eagles Gameday Blog</title>
  <link rel="shortcut icon" href="/favicon.ico">
  <link rel="stylesheet" href="font-awesome.min.css">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <h1>Philadelphia Eagles</h1>
  <h2>Gameday Blog</h2>


  <h3>What we're saying:</h3>
<ul class="messages">
<% for(var i=0; i<messages.length; i++) {%>
  <li class="message">
    <span><%= messages[i].name %></span>
    <span><%= messages[i].msg %></span>
    <% if(messages[i].timestamp) { %>
      <span class="timestamp">
        <%
          const now = new Date();
          const postTime = new Date(messages[i].timestamp);
          const diffMs = now - postTime;
          const diffMins = Math.floor(diffMs / 60000);
          const diffHours = Math.floor(diffMins / 60);
          const diffDays = Math.floor(diffHours / 24);
          
          let timeAgo;
          if (diffMins < 1) {
            timeAgo = "just now";
          } else if (diffMins < 60) {
            timeAgo = diffMins + " minute" + (diffMins === 1 ? "" : "s") + " ago";
          } else if (diffHours < 24) {
            timeAgo = diffHours + " hour" + (diffHours === 1 ? "" : "s") + " ago";
          } else {
            timeAgo = diffDays + " day" + (diffDays === 1 ? "" : "s") + " ago";
          }
        %>
        <%= timeAgo %>
      </span>
    <% } %>
    <span><%= messages[i].thumbUp %></span>
    <span><%= messages[i].thumbDown %></span>
    <span><i class="fa fa-thumbs-up" aria-hidden="true"></i></span>
    <span><i class="fa fa-thumbs-down" aria-hidden="true"></i></span>
    <!-- <span><i class="fa fa-trash" aria-hidden="true"></i></span> -->
  </li>
<% } %>
</ul>

  <h2>Drop your thoughts:</h2>

  <form action="/messages" method="POST">
    <input type="text" placeholder="name" name="name">
    <input type="text" placeholder="message" name="msg">
    <button type="submit">Submit</button>
  </form>

  <script src="main.js"></script>

</body>
</html>
